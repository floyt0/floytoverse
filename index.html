<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Najnowszy film YouTube – minimal</title>
</head>
<body>
  <h1>Najnowszy film na kanale</h1>
  <p>Wpisz <strong>Channel ID</strong> (np. <code>UC_x5XG1OV2P6uZZ5FSM9Ttw</code>):</p>
  <input id="channelId" placeholder="Wklej ID kanału" />
  <button id="loadBtn">Pokaż</button>

  <div id="status" style="margin-top:10px;color:darkred"></div>
  <div id="result" style="margin-top:15px"></div>

  <script>
    async function fetchLatestVideo(channelId){
      const feedUrl = `https://www.youtube.com/feeds/videos.xml?channel_id=${encodeURIComponent(channelId)}`;
      document.getElementById('status').textContent = 'Ładowanie…';
      try{
        const res = await fetch(feedUrl);
        if(!res.ok) throw new Error('Błąd pobierania RSS ('+res.status+')');
        const text = await res.text();
        const xml = new DOMParser().parseFromString(text, 'application/xml');
        const entry = xml.querySelector('entry');
        if(!entry) throw new Error('Nie znaleziono żadnych filmów.');
        const videoId = entry.querySelector('yt\\:videoId')?.textContent || '';
        const link = videoId ? `https://www.youtube.com/watch?v=${videoId}` : '';
        document.getElementById('result').innerHTML = link ? `<a href="${link}" target="_blank">${link}</a>` : 'Brak linku.';
        document.getElementById('status').textContent = '';
      }catch(err){
        document.getElementById('status').textContent = '❗ ' + (err.message || 'Błąd.');
      }
    }

    document.getElementById('loadBtn').addEventListener('click', () => {
      const id = document.getElementById('channelId').value.trim();
      if(!id){
        document.getElementById('status').textContent = 'Podaj prawidłowy Channel ID.';
        return;
      }
      fetchLatestVideo(id);
    });
  </script>
</body>
</html>